<html><head></head><body><dom-module id="page-humidity"><template><style>:host{display:block;height:100%;overflow:auto;}.header{height:100%;}.date{padding:5px;float:left;width:440px;height:calc(100% - 10px);}.chart{height:280px;margin:0px;margin-right:200px;width:calc(100% - 400px);}#container{height:100%;}#container > div{float:left;}.header_chart{width:200px;height:280px;line-height:280px;text-align:center;color:white;}.header_chart > p{vertical-align:middle;margin:0px;line-height:1.5;display:inline-block;}.tpb_font{font-family:'Prompt', sans-serif;}</style><div id="container"></div></template><script>class PageHumidity extends Polymer.Element{static get is(){return"page-humidity"}static get properties(){return{humidityData:{type:Array,observer:"onHumidityDataChanged"},batteryData:{type:Array,observer:"onBatteryDataChanged"},dataList:{type:Object,value:{}},charts:Object}}onHumidityDataChanged(humidityData){if(humidityData){var observedData=humidityData[0].data,humidityDataArray=[];for(let index=0;index<observedData.length;index++){const element=observedData[index];var b=moment(element.observed_timestamp);humidityDataArray.push([b.toDate().getTime(),element.value])}this.dataList.humidity=humidityDataArray;this.initChart()}else{if(humidityData===void 0){this.dataList.humidity=[]}}}onBatteryDataChanged(batteryData){if(batteryData){var observedData=batteryData[0].data,batteryDataArray=[];for(let index=0;index<observedData.length;index++){const element=observedData[index];var b=moment(element.observed_timestamp);batteryDataArray.push([b.toDate().getTime(),element.value])}this.dataList.battery=batteryDataArray;this.initChart()}else{if(batteryData===void 0){this.dataList.battery=[]}}}initChart(){if(this.dataList.battery!==void 0&&this.dataList.humidity!==void 0){if(0!==this.dataList.battery.length&&0!==this.dataList.humidity.length){var chartData={datasets:[{name:"\u0E04\u0E27\u0E32\u0E21\u0E0A\u0E37\u0E49\u0E19\u0E2A\u0E31\u0E21\u0E1E\u0E31\u0E17\u0E18\u0E4C",data:this.dataList.humidity,unit:"%",type:"spline",valueDecimals:1,min:0,max:100},{name:"\u0E41\u0E1A\u0E15\u0E40\u0E15\u0E2D\u0E23\u0E35\u0E48",data:this.dataList.battery,unit:"\u0E42\u0E27\u0E25\u0E15\u0E4C",type:"spline",valueDecimals:1,min:0,max:20}]};if(this.charts){this.removeActionFunction();this.destroyChart();this.$.container.innerHTML=""}this.createChart(chartData)}else{}}}addDataToChart(chartData){chartData.datasets.forEach(function(dataset,i){var tmp={data:dataset.data,name:dataset.name,type:dataset.type,color:Highcharts.getOptions().colors[i],fillOpacity:1,tooltip:{valueSuffix:" "+dataset.unit}};this.charts[i].addSeries(tmp,!0,!0)}.bind(this))}addData(station_id,station_name,dataAdd,color,timeXScale_hr){if(null!==this.charts){var series=this.charts.get(station_id);if(series===void 0){var tmp={id:station_id,name:station_name,data:dataAdd};if(color!==void 0){tmp.color=color}this.charts.addSeries(tmp,!0,!0)}}}clearData(){for(let index=0;index<this.charts.length;index++){const element=this.charts[index];for(var i=0;i<element.series.length;i++){element.series[i].remove(!1);i--}}}createActionFunction(){["mousemove","touchmove","touchstart"].forEach(function(eventType){this.$.container.addEventListener(eventType,this.actionFunction.bind(this))}.bind(this));Highcharts.Point.prototype.highlight=function(event){event=this.series.chart.pointer.normalize(event);this.onMouseOver();this.series.chart.tooltip.refresh(this);this.series.chart.xAxis[0].drawCrosshair(event,this)};Highcharts.Pointer.prototype.reset=function(){return}}destroyChart(){for(let index=0;index<this.charts.length;index++){const element=this.charts[index];element.destroy()}}removeActionFunction(){["mousemove","touchmove","touchstart"].forEach(function(eventType){this.$.container.removeEventListener(eventType,this.actionFunction.bind(this))}.bind(this))}actionFunction(e){var chart,point,i,event;for(let index=0;index<this.charts.length;index++){const chart=this.charts[index];if(chart!==void 0){event=chart.pointer.normalize(e);point=chart.series[0].searchPoint(event,!0);if(point){point.highlight(e)}}}}createChart(activity){var chartList=[],colors=["#7cb5ec","#90ed7d","#45a6f0","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"];activity.datasets.forEach(function(dataset,i){var headerDiv=document.createElement("div");headerDiv.className="header_chart";var html="<p>"+dataset.name+"";if(""!==dataset.unit){html=html+"<br/>("+dataset.unit+")"}html=html+"</p>";headerDiv.innerHTML=html;var chartDiv=document.createElement("div");chartDiv.className="chart";this.$.container.appendChild(headerDiv);this.$.container.appendChild(chartDiv);var chart=Highcharts.chart(chartDiv,{chart:{backgroundColor:"rgba(255, 255, 255, 0.0)",marginLeft:40,spacingTop:20,spacingBottom:20},title:{text:"",align:"left",margin:0,x:30},credits:{enabled:!1},legend:{enabled:!1},xAxis:{className:"tpb_font",type:"datetime",crosshair:!0,tickInterval:1e3*(3600*24),events:{setExtremes:this.syncExtremes},labels:{}},yAxis:{title:{text:null},gridLineWidth:.2,min:dataset.min,max:dataset.max},tooltip:{pointFormatter:function(){var b=moment(this.x);return b.format("D MMMM YYYY HH.mm")+" \u0E19. : "+this.y+" "+dataset.unit},headerFormat:"",shadow:!1,style:{fontSize:"14px",fontFamily:"Prompt, sans-serif"},valueDecimals:dataset.valueDecimals},series:[{data:dataset.data,name:dataset.name,type:dataset.type,color:colors[i],fillOpacity:1,tooltip:{valueSuffix:" "+dataset.unit},lineWidth:1}]});chartList.push(chart)}.bind(this));this.charts=chartList;this.createActionFunction()}syncExtremes(e){var thisChart=this.charts;if("syncExtremes"!==e.trigger){Highcharts.each(Highcharts.charts,function(chart){if(chart!==thisChart){if(chart.xAxis[0].setExtremes){chart.xAxis[0].setExtremes(e.min,e.max,void 0,!1,{trigger:"syncExtremes"})}}})}}constructor(){super()}ready(){super.ready();Polymer.RenderStatus.afterNextRender(this,function(){})}}window.customElements.define(PageHumidity.is,PageHumidity);</script></dom-module></body></html>